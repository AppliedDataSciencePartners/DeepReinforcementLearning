{"version":3,"file":"batchnorm.js","sourceRoot":"","sources":["../../src/ops/batchnorm.ts"],"names":[],"mappings":"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"}